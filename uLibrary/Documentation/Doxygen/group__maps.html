<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Maps</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>Maps</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Map type.  <a href="struct_u_l___m_a_p.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g9c65e1fb4ce1e221209a11ce520d0e3d">UL_MAP_FORMATS</a> { <a class="el" href="group__maps.html#gg9c65e1fb4ce1e221209a11ce520d0e3d81708881378284110e8c9a91b6c92afd">UL_MF_U16</a> =  0, 
<a class="el" href="group__maps.html#gg9c65e1fb4ce1e221209a11ce520d0e3d393698609e148ca76bf69775eda0acd7">UL_MF_U16_GBA</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#gc0a72c33ff765bf2a1d680e4231ad947">ulCreateMap</a> (<a class="el" href="struct_u_l___i_m_a_g_e.html">UL_IMAGE</a> *img, void *map_data, int tileX, int tileY, int mapSizeX, int mapSizeY, int map_format)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g6fed8edac03b232ea47bd47d5b1995ce">ulDeleteMap</a> (<a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a> *map)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g651ce618e6ec5bd5fc3bf65af52368e3">ulDrawMap</a> (<a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a> *m)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Support for maps in µLibrary. <hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="g9c65e1fb4ce1e221209a11ce520d0e3d"></a><!-- doxytag: member="map.h::UL_MAP_FORMATS" ref="g9c65e1fb4ce1e221209a11ce520d0e3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__maps.html#g9c65e1fb4ce1e221209a11ce520d0e3d">UL_MAP_FORMATS</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Map formats <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg9c65e1fb4ce1e221209a11ce520d0e3d81708881378284110e8c9a91b6c92afd"></a><!-- doxytag: member="UL_MF_U16" ref="gg9c65e1fb4ce1e221209a11ce520d0e3d81708881378284110e8c9a91b6c92afd" args="" -->UL_MF_U16</em>&nbsp;</td><td>
16 bits per entry </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg9c65e1fb4ce1e221209a11ce520d0e3d393698609e148ca76bf69775eda0acd7"></a><!-- doxytag: member="UL_MF_U16_GBA" ref="gg9c65e1fb4ce1e221209a11ce520d0e3d393698609e148ca76bf69775eda0acd7" args="" -->UL_MF_U16_GBA</em>&nbsp;</td><td>
16 bits per entry, 10 for tile, 2 for mirror, 4 for palette </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gc0a72c33ff765bf2a1d680e4231ad947"></a><!-- doxytag: member="map.h::ulCreateMap" ref="gc0a72c33ff765bf2a1d680e4231ad947" args="(UL_IMAGE *img, void *map_data, int tileX, int tileY, int mapSizeX, int mapSizeY, int map_format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a>* ulCreateMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_l___i_m_a_g_e.html">UL_IMAGE</a> *&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>map_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tileY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mapSizeX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mapSizeY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>map_format</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new map. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>img</em>&nbsp;</td><td>Source image, containing the tileset for the map. Tiles are placed from left to right, and from top to bottom by lines. A simple tileset containing 8 tiles of 16x16 each could be 128x16, 64x32, 16x128, etc. The width of the image MUST be a power of two and CANNOT exceed the maximum width of DS textures (2048?). If so, place some tiles on the next line. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>map_data</em>&nbsp;</td><td>Pointer to the raw map data. It's just a table whose size is mapSizeX * mapSizeY and currently each table entry is a 16 bits integer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tileX,tileY</em>&nbsp;</td><td>Size of a tile in the tileset. In the above example, it would be 16 and 16. Please note that they MUST be a power of two! </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapSizeX,mapSizeY</em>&nbsp;</td><td>Dimensions of the map (x = width, y = height). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>map_format</em>&nbsp;</td><td>Currently supported map formats are:<ul>
<li>UL_MF_U16: 16 bits entries. Bits 0-15: tile number. This format allows a large number of tiles.</li><li>UL_MF_U16_GBA: 16 bits entries. Bits 0-9: tile number, 10: mirror H, 11: mirror V, 12-15: palette number. Compatible with GBA/NDS standard maps.</li></ul>
</td></tr>
  </table>
</dl>
Note: The block n° 0 is ALWAYS treated as a transparent tile! Even if you've put a non transparent tile in the tileset for this entry, it will not be drawn at all!<p>
Namely, GBA Graphics has an option to generate a map with the first tile being always transparent. Some other editors may do it as well, and in any way, the only thing you've got to care about is that the first tile in the tileset is transparent.<p>
Note: The tileset's tint1 member is used to tint the ENTIRE map, no gradient is made! 
</div>
</div><p>
<a class="anchor" name="g6fed8edac03b232ea47bd47d5b1995ce"></a><!-- doxytag: member="map.h::ulDeleteMap" ref="g6fed8edac03b232ea47bd47d5b1995ce" args="(UL_MAP *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulDeleteMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a> *&nbsp;</td>
          <td class="paramname"> <em>map</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes a map. Call this once you've finished with a map. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>map</em>&nbsp;</td><td>Map previously created with ulCreateMap. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g651ce618e6ec5bd5fc3bf65af52368e3"></a><!-- doxytag: member="map.h::ulDrawMap" ref="g651ce618e6ec5bd5fc3bf65af52368e3" args="(UL_MAP *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulDrawMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_l___m_a_p.html">UL_MAP</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draws a map on the screen.<p>
Please note that drawing a map requires a large number of polygons (one for each tile) to be drawn on the screen, which will fill the vertex memory a lot. A single fullscreen 8x8 scrolled map (33x25) already requires 825 quads, which is about 55% the total available memory! To spare some memory, you should always use tiles that are at least 16x16 (15% memory this time) and use if possible null map entries (transparent), which are simply skipped. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jul 14 23:39:33 2007 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
